<div class="lokaalbestuur-vlaanderen">
  {{#if this.formIsInvalid}}
    <div class="alert alert--error">
      <div class="alert__icon" aria-hidden="true"></div>
      <div class="alert__content">
        <div class="alert__title">Gelieve de velden van uw bericht na te kijken</div>
        <div class="alert__message">
          <ul class="bullet-list">
            {{#each-in this.showErrors as |field value|}}
              {{#if value}}
                {{#if (v-get this.model field "isInvalid")}}
                  <li>{{v-get this.model field "message"}}</li>
                {{/if}}
              {{/if}}
            {{/each-in}}
          </ul>
        </div>
      </div>
    </div>
  {{/if}}

  <p class="u-spacer">
    U kan klacht indienen tegen de werking van een lokaal bestuur. Meer informatie
    over klacht indienen kan u vinden op:
    <a href="https://lokaalbestuur.vlaanderen.be/klachtenwegwijzer">https://lokaalbestuur.vlaanderen.be/klachtenwegwijzer</a>.
  </p>

  <form>
    <div class="form__row">
      <label class="form__label">
        Naam
        <span class="form__required">*</span>
        <Input @value={{this.model.name}} class={{if this.nameIsInvalid "input-field input-field--block input-field--error" "input-field input-field--block"}} @focus-out={{action (mut this.showErrors.name) true}} />
      </label>
      {{#if this.nameIsInvalid}}
        <p class="small form__error-message">Gelieve dit veld in te vullen.</p>
      {{/if}}

      <label class="form__label">
        Contactpersoon indien vereniging
        <Input @value={{this.model.contactPersonName}} class="input-field input-field--block" />
      </label>
    </div>

    <div class="form__row">
      <div class="grid">
        <div class="col--6-12 col--12-12--s">
          <label class="form__label">
            Straat
            <span class="form__required">*</span>
            <Input @value={{this.model.street}} class={{if this.streetIsInvalid "input-field input-field--block input-field--error" "input-field input-field--block"}} @focus-out={{action (mut this.showErrors.street) true}} />
          </label>
          {{#if this.streetIsInvalid}}
            <p class="small form__error-message">Gelieve dit veld in te vullen.</p>
          {{/if}}
        </div>
        <div class="col--3-12 col--6-12--s">
          <label class="form__label">
            Huisnummer
            <span class="form__required">*</span>
            <Input @value={{this.model.houseNumber}} class={{if this.houseNumberIsInvalid "input-field input-field--block input-field--error" "input-field input-field--block"}} @focus-out={{action (mut this.showErrors.houseNumber) true}} />
          </label>
          {{#if this.houseNumberIsInvalid}}
            <p class="small form__error-message">Geef een geldig huisnummer op.</p>
          {{/if}}
        </div>
        <div class="col--3-12 col--6-12--s">
          <label class="form__label">
            Toevoeging
            <Input @value={{this.model.addressComplement}} class="input-field input-field--block" />
          </label>
        </div>
      </div>
    </div>

    <div class="form__row">
      <div class="grid">
        <div class="col--8-12 col--12-12--xs">
          <label class="form__label">
            Gemeente of Stad
            <span class="form__required">*</span>
            <Input @value={{this.model.locality}} class={{if this.localityIsInvalid "input-field input-field--block input-field--error" "input-field input-field--block"}} @focus-out={{action (mut this.showErrors.locality) true}} />
          </label>
          {{#if this.localityIsInvalid}}
            <p class="small form__error-message">Gelieve dit veld in te vullen.</p>
          {{/if}}
        </div>
        <div class="col--4-12 col--12-12--xs">
          <label class="form__label">
            Postcode
            <span class="form__required">*</span>
            <Input @value={{this.model.postalCode}} class={{if this.postalCodeIsInvalid "input-field input-field--block input-field--error" "input-field input-field--block"}} @focus-out={{action (mut this.showErrors.postalCode) true}} />
          </label>
          {{#if this.postalCodeIsInvalid}}
            <p class="small form__error-message">Geef een geldige postcode op.</p>
          {{/if}}
        </div>
      </div>
    </div>

    <div class="form__row">
      <label class="form__label">
        Telefoonnummer
        <Input @value={{this.model.telephone}} class={{if this.telephoneIsInvalid "input-field input-field--block input-field--error" "input-field input-field--block"}} @focus-out={{action (mut this.showErrors.telephone) true}} />
      </label>
      {{#if this.telephoneIsInvalid}}
        <p class="small form__error-message">Geef een geldig telefoonnummer op.</p>
      {{/if}}
    </div>

    <div class="form__row">
      <label class="form__label">
        Mailadres
        <span class="form__required">*</span>
        <Input @value={{this.model.email}} class={{if this.emailIsInvalid "input-field input-field--block input-field--error" "input-field input-field--block"}} @focus-out={{action (mut this.showErrors.email) true}} />
      </label>
      {{#if this.emailIsInvalid}}
        <p class="small form__error-message">Geef een geldig mailadres op.</p>
      {{/if}}
    </div>

    <div class="form__row">
      <label class="form__label">
        Omschrijving klacht
        <span class="form__required">*</span>
        <Textarea @value={{this.model.content}} class={{if this.contentIsInvalid "textarea textarea--block component u-spacer--tiny textarea--error" "textarea textarea--block component u-spacer--tiny"}} @focus-out={{action (mut this.showErrors.content) true}} @rows="5" />      </label>
      {{#if this.contentIsInvalid}}
        <p class="small form__error-message">Gelieve dit veld in te vullen.</p>
      {{/if}}
      <p class="smaller">
        Beschrijf zo duidelijk mogelijk wat uw klacht inhoudt: wie, wat, waar en
        wanneer. Geef aan tegen welke handelingen of beslissingen van welk bestuur
        u klacht wenst in te dienen, en wat zijn de concrete feiten/handelingen
        waarover u klacht wil indienen.
      </p>
    </div>

    <div class="form__row u-spacer">
      <label class="form__label">Bijlagen</label>
      <div>
        {{#each this.model.attachments as |attachment|}}
          <VoMuFileCard @file={{attachment}} @downloadable={{false}} @onDelete={{action "deleteFile"}} />
        {{/each}}
        <VoMuFileDropzone @onFinishUpload={{action "attachFile"}} @maxFileSizeMB={{1024}} />
      </div>
    </div>

    <div>
      {{#if this.saveComplaintError}}
        {{this.saveComplaintError}}
      {{/if}}
    </div>
    <button {{action "submitComplaint"}} disabled={{v-get this.model "isInvalid"}} class="button" role="button">Bericht verzenden</button>
  </form>
</div>

{{outlet}}
